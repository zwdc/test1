hdxydb.zfxfzb.xsjbxxb

MM    密码      密文
XSMM  学生密码  明文
ZYDM  专业代码	明文 0101


zfsoft_zfim.tysfyhb



ALTER TABLE ZFSOFT_ZFIM.TYSFYHB
 DROP PRIMARY KEY CASCADE;

DROP TABLE ZFSOFT_ZFIM.TYSFYHB CASCADE CONSTRAINTS;

CREATE TABLE ZFSOFT_ZFIM.TYSFYHB
(
  YHM          VARCHAR2(20 BYTE)                NOT NULL,
  KL           VARCHAR2(32 BYTE)                DEFAULT '{MD5}ZwsUcorZkCrsujLiL6T2vQ==',
  XM           VARCHAR2(40 BYTE),
  DZYX         VARCHAR2(40 BYTE),
  LXDM         VARCHAR2(10 BYTE)                NOT NULL,
  DWH          VARCHAR2(8 BYTE)                 NOT NULL,
  PYSX         VARCHAR2(20 BYTE),
  ISACTIVE     VARCHAR2(2 BYTE),
  JHM          VARCHAR2(20 BYTE),
  JHMTIME      VARCHAR2(30 BYTE),
  ZJLX         VARCHAR2(2 BYTE),
  ZJHM         VARCHAR2(30 BYTE),
  QUESTION1    VARCHAR2(100 BYTE),
  ANSWER1      VARCHAR2(100 BYTE),
  MBWTSFSZ     VARCHAR2(2 BYTE),
  BMYX         VARCHAR2(40 BYTE),
  SJHM         VARCHAR2(15 BYTE),
  SFBDSJ       VARCHAR2(2 BYTE),
  TPDZ         VARCHAR2(100 BYTE),
  MODPWDTIME   VARCHAR2(30 BYTE),
  GWDM         VARCHAR2(20 BYTE),
  PHONETIMES   VARCHAR2(2 BYTE),
  UKEYNUMBER   VARCHAR2(16 BYTE),
  NICKNAME     VARCHAR2(20 BYTE),
  SJRADOM      VARCHAR2(10 BYTE),
  SJRADOMTIME  VARCHAR2(30 BYTE),
  STATUS       VARCHAR2(20 BYTE)                DEFAULT '1'
)
TABLESPACE ZF
RESULT_CACHE (MODE DEFAULT)
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          4M
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;

COMMENT ON TABLE ZFSOFT_ZFIM.TYSFYHB IS '统一身份用户表';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.YHM IS '用户名';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.KL IS '口令';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.XM IS '姓名';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.DZYX IS '电子邮箱';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.LXDM IS '用户类型';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.DWH IS '单位号C';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.PYSX IS '拼音缩写';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.ISACTIVE IS '帐号是否激活';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.JHM IS '激活码';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.JHMTIME IS '激活码生成时间';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.ZJLX IS '证件类型';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.ZJHM IS '证件号码';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.QUESTION1 IS '保密问题1';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.ANSWER1 IS '保密答案1';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.MBWTSFSZ IS '密保问题是否设置成功';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.BMYX IS '密保邮箱';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.SJHM IS '手机号码';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.SFBDSJ IS '是否绑定手机';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.TPDZ IS '图片地址';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.MODPWDTIME IS '密码修改时间';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.GWDM IS '用户默认岗位';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.PHONETIMES IS '手机找回密码次数';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.UKEYNUMBER IS '硬件编号';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.NICKNAME IS '用户昵称';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.SJRADOM IS '手机绑定随机码';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.SJRADOMTIME IS '手机绑定随机码生成时间';

COMMENT ON COLUMN ZFSOFT_ZFIM.TYSFYHB.STATUS IS '账号状态';



CREATE INDEX ZFSOFT_ZFIM.IDX_TYSFYHB_YHM ON ZFSOFT_ZFIM.TYSFYHB
(LXDM, DWH, YHM)
LOGGING
TABLESPACE ZF
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          2M
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


CREATE INDEX ZFSOFT_ZFIM.I_TYSFYHB_YHM_KL ON ZFSOFT_ZFIM.TYSFYHB
(YHM, KL)
LOGGING
TABLESPACE ZF
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          704K
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


CREATE UNIQUE INDEX ZFSOFT_ZFIM.PK_TYSFYHB ON ZFSOFT_ZFIM.TYSFYHB
(YHM)
LOGGING
TABLESPACE ZF
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          2M
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


ALTER TABLE ZFSOFT_ZFIM.TYSFYHB ADD (
  CONSTRAINT PK_TYSFYHB
  PRIMARY KEY
  (YHM)
  USING INDEX ZFSOFT_ZFIM.PK_TYSFYHB
  ENABLE VALIDATE);

ALTER TABLE ZFSOFT_ZFIM.TYSFYHB ADD (
  CONSTRAINT FK_TYSFYHB_FK_TYSFYH_YHLXB 
  FOREIGN KEY (LXDM) 
  REFERENCES ZFSOFT_ZFIM.YHLXB (LXDM)
  ENABLE VALIDATE);

GRANT SELECT ON ZFSOFT_ZFIM.TYSFYHB TO ZFSOFT_ZFDXC;


ALTER TABLE ZFSOFT_ZFIM.XX_YXSDWJBSJZL
 DROP PRIMARY KEY CASCADE;

DROP TABLE ZFSOFT_ZFIM.XX_YXSDWJBSJZL CASCADE CONSTRAINTS;

CREATE TABLE ZFSOFT_ZFIM.XX_YXSDWJBSJZL
(
  DWH        VARCHAR2(8 BYTE)                   NOT NULL,
  DWMC       VARCHAR2(60 BYTE),
  DWYWMC     VARCHAR2(180 BYTE),
  DWJC       VARCHAR2(20 BYTE),
  DWYWJC     VARCHAR2(8 BYTE),
  DWJP       VARCHAR2(18 BYTE),
  DWDZ       VARCHAR2(60 BYTE),
  LSDWM      VARCHAR2(6 BYTE),
  DWLBM      VARCHAR2(2 BYTE),
  DWYXBS     VARCHAR2(1 BYTE),
  SXRQ       VARCHAR2(20 BYTE),
  STBS       VARCHAR2(1 BYTE),
  DWBBM      VARCHAR2(1 BYTE),
  JLNY       VARCHAR2(20 BYTE),
  XZFZRJGH   VARCHAR2(20 BYTE),
  DZZFZRJGH  VARCHAR2(20 BYTE),
  XSSH       NUMBER(3)
)
TABLESPACE ZF
RESULT_CACHE (MODE DEFAULT)
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
NOPARALLEL
MONITORING;

COMMENT ON TABLE ZFSOFT_ZFIM.XX_YXSDWJBSJZL IS '院系所单位基本数据子类';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.DWH IS '单位号C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.DWMC IS '单位名称C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.DWYWMC IS '单位英文名称C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.DWJC IS '单位简称C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.DWYWJC IS '单位英文简称C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.DWJP IS '单位简拼C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.DWDZ IS '单位地址C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.LSDWM IS '隶属或归口管理单位代码C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.DWLBM IS '单位类别码C[DM_HB_DWLB]';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.DWYXBS IS '单位有效标识C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.SXRQ IS '生效日期C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.STBS IS '实体标识C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.DWBBM IS '单位办别码C[DM_HB_DWBB]';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.JLNY IS '建立年月C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.XZFZRJGH IS '行政负责人教工号C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.DZZFZRJGH IS '党组织负责人教工号C';

COMMENT ON COLUMN ZFSOFT_ZFIM.XX_YXSDWJBSJZL.XSSH IS '显示顺序';



CREATE INDEX ZFSOFT_ZFIM.IDX_XX_YXSDWJBSJZL_DWH ON ZFSOFT_ZFIM.XX_YXSDWJBSJZL
(DWH, LSDWM, DWLBM)
LOGGING
TABLESPACE ZF
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


CREATE UNIQUE INDEX ZFSOFT_ZFIM.PK_XX_YXSDWJBSJZL ON ZFSOFT_ZFIM.XX_YXSDWJBSJZL
(DWH)
LOGGING
TABLESPACE ZF
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MAXSIZE          UNLIMITED
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


ALTER TABLE ZFSOFT_ZFIM.XX_YXSDWJBSJZL ADD (
  CONSTRAINT PK_XX_YXSDWJBSJZL
  PRIMARY KEY
  (DWH)
  USING INDEX ZFSOFT_ZFIM.PK_XX_YXSDWJBSJZL
  ENABLE VALIDATE);

ALTER TABLE ZFSOFT_ZFIM.XX_YXSDWJBSJZL ADD (
  CONSTRAINT FK_XX_YXSDW_FK_XX_YXS_DM_HB_DW 
  FOREIGN KEY (DWLBM) 
  REFERENCES ZFSOFT_ZFIM.DM_HB_DWLB (DWLBM)
  ENABLE VALIDATE);




我最后的

select 
   DWH        VARCHAR2(8 BYTE)                   NOT NULL,
   DWMC       VARCHAR2(60 BYTE),       
   YHM          VARCHAR2(20 BYTE)                NOT NULL,
   KL           VARCHAR2(32 BYTE)                DEFAULT '{MD5}ZwsUcorZkCrsujLiL6T2vQ==',
   XM           VARCHAR2(40 BYTE), 
    ZJLX         VARCHAR2(2 BYTE),
  ZJHM         VARCHAR2(30 BYTE),
    STATUS       VARCHAR2(20 BYTE)                DEFAULT '1'
    
    from
    
    ZFSOFT_ZFIM.TYSFYHB a,ZFSOFT_ZFIM.XX_YXSDWJBSJZL b
    where a.dwh=b.dwh







select    b.DWH,b.DWMC,a.YHM,a.KL,a.XM,a.LXDM,a.ISACTIVE,a.ZJLX,a.ZJHM,a.STATUS
from
ZFSOFT_ZFIM.TYSFYHB a,ZFSOFT_ZFIM.XX_YXSDWJBSJZL b
where a.dwh=b.dwh